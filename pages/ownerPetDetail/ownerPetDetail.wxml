<!--pages/ownerPetDetail/ownerPetDetail.wxml-->
<view class="container">
  <!-- 加载中 -->
  <view class="loading" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <view class="loading-text">加载中...</view>
  </view>
  
  <!-- 宠物信息 -->
  <view class="pet-header" wx:if="{{!loading && pet}}">
    <view class="pet-avatar">
      <block wx:if="{{pet.avatar}}">
        <image src="{{pet.avatar}}" mode="aspectFill"></image>
      </block>
      <block wx:else>
        <view class="default-pet-icon">
          <text>🐾</text>
        </view>
      </block>
    </view>
    <view class="pet-info">
      <!-- 宠物名称和状态 -->
      <view class="info-row">
        <view class="pet-name">{{pet.name}}</view>
        <view class="pet-status {{pet.status === '住院' ? 'status-hospitalized' : 'status-postop'}}">
          {{pet.status}}
        </view>
      </view>
      
      <!-- 标签 -->
      <view class="tags-row" wx:if="{{pet.tags && pet.tags.length > 0}}">
        <view class="pet-tag" wx:for="{{pet.tags}}" wx:key="*this">{{item}}</view>
      </view>
      
      <!-- 宠物品种 -->
      <view class="info-row">
        <view class="info-item">
          <text class="item-label">品种：</text>
          <text class="item-value">{{pet.breed || '未知'}}</text>
        </view>
      </view>
      
      <!-- 入院原因 -->
      <view class="info-row" wx:if="{{pet.reason}}">
        <view class="info-item">
          <text class="item-label">入院原因：</text>
          <text class="item-value">{{pet.reason}}</text>
        </view>
      </view>
      
      <!-- 诊所信息 -->
      <view class="info-row">
        <view class="info-item">
          <text class="item-label">就诊诊所：</text>
          <text class="item-value">{{pet.clinicName || '未知诊所'}}</text>
        </view>
      </view>
      
      <!-- 创建时间 -->
      <view class="info-row">
        <view class="info-item">
          <text class="item-label">创建时间：</text>
          <text class="item-value time-value">{{pet.createTime}}</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- 操作按钮 -->
  <view class="action-buttons" wx:if="{{!loading && pet}}">
    <button class="btn-share" bindtap="shareRecord">
      <text class="icon">🔗</text>
      <text>分享记录</text>
    </button>
  </view>
  
  <!-- 记录列表 -->
  <view class="section-title" wx:if="{{!loading && records.length > 0}}">状态记录</view>
  <view class="record-list" wx:if="{{!loading && records.length > 0}}">
    <view wx:for="{{records}}" wx:key="id" class="record-item">
      <view class="record-header">
        <text class="record-time">{{item.createdAt}}</text>
        <text class="record-vet" wx:if="{{item.vetName}}">{{item.vetName}}</text>
      </view>
      <view class="record-content">
        <text>{{item.content}}</text>
      </view>
      <view class="record-images" wx:if="{{item.images && item.images.length > 0}}">
        <view 
          class="record-image-item" 
          wx:for="{{item.images}}" 
          wx:for-item="image" 
          wx:key="*this"
          bindtap="previewImage"
          data-src="{{image}}"
          data-urls="{{item.images}}"
        >
          <image src="{{image}}" mode="aspectFill"></image>
        </view>
      </view>
    </view>
  </view>
  
  <!-- 没有记录 -->
  <view class="empty-records" wx:if="{{!loading && records.length === 0}}">
    <view class="empty-icon">📝</view>
    <view class="empty-text">暂无状态记录</view>
  </view>
  
  <!-- 返回按钮 -->
  <view class="back-button" bindtap="navigateBack">
    <text class="back-icon">←</text>
  </view>
</view>
